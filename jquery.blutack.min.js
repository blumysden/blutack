(function(){"use strict";function t(t){return t.data("tackProps")}function i(t,i){t.data("tackProps",i)}function o(o){if(!t(l(this))){var e=l(this),n=o.offsetTop,s=e.offset(),r=s.top-n,h=e.css("position")||"static",c={offsetTop:n,offsetLeft:"static"!=h?s.left:"auto",tackAt:r,proxyId:v+g,initial:{position:h,width:o.freezeWidth?e.css("width"):"auto",top:e.css("top")||"auto",right:e.css("right"),left:e.css("left")},options:o};i(e,c),d[r]?d[r].free.push(e):d[r]={free:[e],tacked:[]},g+=1,k+=1,p.push(this),1!=k||x||(x=!0,a()),f()}}function e(){var o,e=l(this),n=t(e)||{},f=e.hasClass(w)?"tacked":"free",r=d[n.tackAt];if(r)for(o=r[f].length-1;o>=0;o--)if(r[f][o].get(0)==this){r[f].splice(o,1),s(e),i(e,null),k-=1,l("#"+n.proxyId).remove();break}for(var o=p.length-1;o>=0;o--)if(p[o]==this){p.splice(o,1);break}}function n(i){var o=t(i),e=l("#"+o.proxyId);e.length||(e=l('<div id="'+o.proxyId+'"></div>'),e.height(o.height),e.insertBefore(i)),e.show(),i.css({position:"fixed",top:o.offsetTop,width:r(i),left:o.offsetLeft,right:"auto"}).addClass(w)}function s(i){var o=t(i);l("#"+o.proxyId).hide(),i.css(o.initial).removeClass(w)}function f(t){var i,o,e,f,r,a,h=l(window).scrollTop(),u=t&&void 0!==c?h>c?"down":"up":null;if(t&&(c=h),!k)return!1;for(r in d)if(d.hasOwnProperty(r))if(i=d[r],e=i.tacked,f=i.free,"up"!=u&&h>r&&!i.fixing){for(i.fixing=!0,a=f.length-1;a>=0;a--)o=f.pop(),n(o),e.push(o);i.fixing=!1}else if("down"!=u&&r>=h&&!i.fixing){for(i.fixing=!0,a=e.length-1;a>=0;a--)o=e.pop(),s(o),f.push(o);i.fixing=!1}}function r(i){var o=t(i),e=o.initial.width!="auto"?o.initial.width:i.parent().width()-(i.outerWidth()-i.width());i.width(e)}function a(){k&&(l(window).scroll(f),l(window).on("resize",y),l("body").on("orientationchange",y).on("touchend",f))}function h(t,i){var o,e,n,s,f,r={offsetTop:0,freezeWidth:!1},a=(l(t).data("blutack-options")||"").split(";"),h={};for(f=a.length-1;f>=0;f--)o=a[f].split(":"),o.length==2&&(e=l.trim(o[0]),r[e]!==void 0&&(n=l.trim(o[1]),s=n.match(/d+/),s&&s.length==n.length?n=Number(n):"false"===n?n=!1:"true"===n&&(n=!0),h[e]=n));return l.extend({},r,h,i)}var c,u=this,l=u.jQuery,p=[],d={},g=0,v="blutack-proxy-",w="blutacked",k=0,x=!1;if(l.fn.blutack)return!1;var y=function(){var i;return function(){clearTimeout(i),i=setTimeout(function(){var i,n,s=[];for(n=p.length-1;n>=0;n--)i=p[n],s.push({elem:i,options:t(l(i)).options}),e.apply(i);for(n=s.length-1;n>=0;n--)o.apply(s[n].elem,[s[n].options])},200)}}();l.fn.blutack=function(t){return"remove"==t?this.each(function(){e.apply(this)}):"tacked"==t?this.hasClass(w):this.each(function(){o.apply(this,[h(this,t)])})},l(document).ready(function(){l(".blutack").blutack()})}).call(this);